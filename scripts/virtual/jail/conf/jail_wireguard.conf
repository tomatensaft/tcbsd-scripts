#parameter file
########################################

#jail id - start at 10
jail_id="24"

#jail name
jail_name="wireguard"

#folder locations
location_main="jails"
location_media="media"
location_release="release"
location_config="config"

#additional kernel module
kernel_module="/${location_main}/${jail_name}/boot/modules/if_wg.ko"

#virtual network
net_prefix="10.99.0"
net_range="${net_prefix}.0/24"
net_address_jail="${net_prefix}.${jail_id}"
net_address_host="${net_prefix}.1${jail_id}"
net_bridge_ip="${net_prefix}.1"
net_bridge_sm="255.255.255.0"
net_bridge_name="bridge90"
net_bridge_desc="virtualbridge"
net_bridge_filter="1"   #bridge packetfilter active 1
net_bridge_add="1"      #add to bridge=1 / not add to bridge=""
net_external_if="igb1"  #external for network/internet
net_internal_if=""      #internal for nat/rdr
net_external_port="51820"    #external for nat/rdr
net_internal_port="51820"    #internal for nat/rdr
net_defaultrouter=""    #defaultrouter for vpn

#vpn settings - optional for vpn server
vpn_prefix="10.88.0"
vpn_port="51820"
vpn_name="wg90"
vpn_ip="${vpn_prefix}.1/32"
vpn_range="${vpn_prefix}.0/24"
vpn_jail_external_if="igb1" #external jail interface for rdr
vpn_jail_internal_if="epair${jail_id}b" #external interface inside jail
vpn_path="/usr/local/etc/wireguard" #select program wireguard/openvpn

#load device defaults
load_device_defaults

#device filesystem 0=unhide all / 99=standard dev
devfs_ruleset=5

#mount fstab filesystems
fstab_name="/${location_main}/${location_config}/${jail_name}.fstab"

#additional firewall rules - rdr/nat - for hostmachine
pfrule_nat="nat pass on ${vpn_jail_internal_if} from ${vpn_range} to any -> (${vpn_jail_internal_if})"
pfrule_rdr="rdr pass log on { ${vpn_jail_external_if} } inet proto udp to (${vpn_jail_external_if}) port ${vpn_port} -> ${net_address_jail}"
pfrule_reload="1" #reload=1 / reload after reboot=0

#if linux version <> "" then install linux (only tar.gz) - otherwise use bsd
linux_version=""
linux_bootstrap=""
linux_url="https://exmaple-url/${linux_version}"

#jail clone name
jail_clone="${jail_name}clone"

#bsd jail verion number
bsd_version="13"

#bsd jail architecture
bsd_arch="$(uname -m)"

#bsd jail release - auto
bsd_release="$(uname -r)" # can be directly 13.0-release

#bsd jail release manual override
bsd_release="13.2-release" #override temporary

#additional software
bsd_tools="" #install software with external script
#bsd_tools="gitea git vim wget" #install tools directly with this parameter

#jail inside start/stop commands
exec_rc_start="/bin/sh /etc/rc"
exec_rc_stop="echo stop"

#additional parameter script
ext_script="./opt/jail_wireguard.sh"

#additional parameter for external script - only used in external script
